{"ast":null,"code":"var _jsxFileName = \"/Users/karlaoshikawa/TRYBE/projetos/sd-025-a-project-trybetunes/src/pages/ProfileEdit.js\";\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getUser, updateUser } from '../services/userAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass ProfileEdit extends React.Component {\n  constructor() {\n    super();\n\n    this.handleChange = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.update = async () => {\n      const {\n        name,\n        email,\n        image,\n        description\n      } = this.state;\n      this.setState({\n        loading: true\n      });\n      await updateUser({\n        name,\n        email,\n        image,\n        description\n      });\n      this.setState({\n        loading: false\n      });\n      const {\n        history\n      } = this.props;\n      history.push('/profile');\n    };\n\n    this.state = {\n      loading: true,\n      name: '',\n      email: '',\n      image: '',\n      description: '' // valid: true,\n\n    };\n  }\n\n  async componentDidMount() {\n    const user = await getUser();\n    console.log(user);\n    const {\n      name,\n      email,\n      image,\n      description\n    } = user;\n    this.setState({\n      name,\n      email,\n      image,\n      description,\n      loading: false\n    });\n  }\n\n  validate() {\n    const {\n      name,\n      email,\n      image,\n      description\n    } = this.state;\n    const emailRegex = /\\S+@\\S+\\.\\S+/;\n    const lengths = name.length > 0 && email.length > 0 && image.length > 0 && description.length > 0;\n    const emailValidator = emailRegex.test(email);\n    return !(lengths && emailValidator);\n  }\n\n  render() {\n    const {\n      loading,\n      name,\n      email,\n      description,\n      image\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 22\n      }, this), !loading && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-testid\": \"page-profile-edit\",\n          children: \"ProfileEdit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            \"data-testid\": \"edit-input-name\",\n            name: \"name\",\n            onChange: this.handleChange,\n            value: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"email\",\n            onChange: this.handleChange,\n            \"data-testid\": \"edit-input-email\",\n            value: email\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"description\",\n            \"data-testid\": \"edit-input-description\",\n            value: description,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            name: \"image\",\n            \"data-testid\": \"edit-input-image\",\n            value: image,\n            onChange: this.handleChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            disabled: this.validate(),\n            \"data-testid\": \"edit-button-save\",\n            type: \"button\",\n            onClick: this.update,\n            children: \"Save\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true);\n  }\n\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func\n  }).isRequired\n};\nexport default ProfileEdit;","map":{"version":3,"names":["React","PropTypes","Header","Loading","getUser","updateUser","ProfileEdit","Component","constructor","handleChange","event","name","value","target","setState","update","email","image","description","state","loading","history","props","push","componentDidMount","user","console","log","validate","emailRegex","lengths","length","emailValidator","test","render","propTypes","shape","func","isRequired"],"sources":["/Users/karlaoshikawa/TRYBE/projetos/sd-025-a-project-trybetunes/src/pages/ProfileEdit.js"],"sourcesContent":["import React from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport { getUser, updateUser } from '../services/userAPI';\n\nclass ProfileEdit extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      name: '',\n      email: '',\n      image: '',\n      description: '',\n      // valid: true,\n    };\n  }\n\n  async componentDidMount() {\n    const user = await getUser();\n    console.log(user);\n    const { name, email, image, description } = user;\n    this.setState({ name, email, image, description, loading: false });\n  }\n\n  handleChange = (event) => {\n    const { name, value } = event.target;\n    this.setState({ [name]: value });\n  };\n\n  update = async () => {\n    const { name, email, image, description } = this.state;\n    this.setState({ loading: true });\n    await updateUser({ name, email, image, description });\n    this.setState({ loading: false });\n    const { history } = this.props;\n    history.push('/profile');\n  };\n\n  validate() {\n    const { name, email, image, description } = this.state;\n    const emailRegex = /\\S+@\\S+\\.\\S+/;\n    const lengths = name.length > 0\n    && email.length > 0\n    && image.length > 0\n    && description.length > 0;\n    const emailValidator = emailRegex.test(email);\n    return !(lengths && emailValidator);\n  }\n\n  render() {\n    const { loading, name, email, description, image } = this.state;\n    return (\n      <>\n        <Header />\n        { loading && <Loading />}\n        { !loading && (\n          <>\n            <div data-testid=\"page-profile-edit\">ProfileEdit</div>\n            <form>\n              <input\n                type=\"text\"\n                data-testid=\"edit-input-name\"\n                name=\"name\"\n                onChange={ this.handleChange }\n                value={ name }\n              />\n              <input\n                type=\"text\"\n                name=\"email\"\n                onChange={ this.handleChange }\n                data-testid=\"edit-input-email\"\n                value={ email }\n              />\n              <input\n                type=\"text\"\n                name=\"description\"\n                data-testid=\"edit-input-description\"\n                value={ description }\n                onChange={ this.handleChange }\n              />\n              <input\n                type=\"text\"\n                name=\"image\"\n                data-testid=\"edit-input-image\"\n                value={ image }\n                onChange={ this.handleChange }\n              />\n              <button\n                disabled={ this.validate() }\n                data-testid=\"edit-button-save\"\n                type=\"button\"\n                onClick={ this.update }\n              >\n                Save\n              </button>\n            </form>\n          </>\n\n        )}\n      </>\n    );\n  }\n}\n\nProfileEdit.propTypes = {\n  history: PropTypes.shape({\n    push: PropTypes.func,\n  }).isRequired,\n};\n\nexport default ProfileEdit;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}