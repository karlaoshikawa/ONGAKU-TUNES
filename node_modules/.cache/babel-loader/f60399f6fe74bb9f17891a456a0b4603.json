{"ast":null,"code":"var _jsxFileName = \"/Users/karlaoshikawa/TRYBE/projetos/sd-025-a-project-trybetunes/src/pages/Favorites.js\";\nimport React from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport MusicCard from '../components/MusicCard';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { createElement as _createElement } from \"react\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nclass Favorites extends React.Component {\n  constructor() {\n    super();\n\n    this.checkedOk = ongaku => {\n      const {\n        best\n      } = this.state;\n      return best.some(fav => fav.trackId === (ongaku === null || ongaku === void 0 ? void 0 : ongaku.trackId));\n    };\n\n    this.favoriteList = async () => {\n      const {\n        favList\n      } = this.state;\n\n      if (this.checkedOk(ongaku)) {\n        this.setState({\n          loading: true\n        });\n        await removeSong(ongaku);\n        const newBest = favList.filter(e => {\n          var _ongaku;\n\n          return e.trackId !== ((_ongaku = ongaku) === null || _ongaku === void 0 ? void 0 : _ongaku.trackId);\n        });\n        this.setState({\n          loading: false,\n          best: newBest\n        });\n      }\n\n      ;\n      const list1 = await getFavoriteSongs();\n      this.setState({\n        favList: list1,\n        loading: false\n      });\n    };\n\n    this.state = {\n      loading: true,\n      favList: []\n    };\n  }\n\n  async componentDidMount() {\n    const list = await getFavoriteSongs();\n    this.setState({\n      loading: false,\n      favList: list\n    });\n  }\n\n  render() {\n    const {\n      loading,\n      favList\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [loading && /*#__PURE__*/_jsxDEV(Loading, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 21\n      }, this), !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          \"data-testid\": \"page-favorites\",\n          children: \"Favorites\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 13\n        }, this), favList.map(fav => /*#__PURE__*/_createElement(MusicCard, { ...fav,\n          key: fav.trackId,\n          checked: true,\n          favoriteList: this.favoriteList,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 36\n          }\n        }))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true);\n  }\n\n}\n\nexport default Favorites;","map":{"version":3,"names":["React","Header","Loading","MusicCard","getFavoriteSongs","removeSong","Favorites","Component","constructor","checkedOk","ongaku","best","state","some","fav","trackId","favoriteList","favList","setState","loading","newBest","filter","e","list1","componentDidMount","list","render","map"],"sources":["/Users/karlaoshikawa/TRYBE/projetos/sd-025-a-project-trybetunes/src/pages/Favorites.js"],"sourcesContent":["import React from 'react';\nimport Header from '../components/Header';\nimport Loading from '../components/Loading';\nimport MusicCard from '../components/MusicCard';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\n\nclass Favorites extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      loading: true,\n      favList: [],\n    };\n  }\n\n  async componentDidMount() {\n    const list = await getFavoriteSongs();\n    this.setState({ loading: false, favList: list });\n  }\n\n  checkedOk = (ongaku) => {\n    const { best } = this.state;\n    return best.some((fav) => fav.trackId === ongaku?.trackId);\n  };\n\n  favoriteList = async () => {\n    const { favList } = this.state;\n    if (this.checkedOk(ongaku)) {\n      this.setState({ loading: true });\n      await removeSong(ongaku);\n      const newBest = favList.filter((e) => e.trackId !== ongaku?.trackId);\n      this.setState({ loading: false, best: newBest });\n    };\n    const list1 = await getFavoriteSongs();\n    this.setState({ favList: list1, loading: false });\n  };\n\n  render() {\n    const { loading, favList } = this.state;\n\n    return (\n      <>\n        {loading && <Loading />}\n        {!loading && (\n          <div>\n            <Header />\n            <div data-testid=\"page-favorites\">Favorites</div>\n            {favList.map((fav) => (<MusicCard\n              { ...fav }\n              key={ fav.trackId }\n              checked\n              favoriteList={ this.favoriteList }\n            />))}\n          </div>\n        )}\n      </>\n    );\n  }\n}\n\nexport default Favorites;\n"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,sBAAnB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,OAAOC,SAAP,MAAsB,yBAAtB;AACA,SAASC,gBAAT,EAA2BC,UAA3B,QAA6C,8BAA7C;;;;;AAEA,MAAMC,SAAN,SAAwBN,KAAK,CAACO,SAA9B,CAAwC;EACtCC,WAAW,GAAG;IACZ;;IADY,KAadC,SAbc,GAaDC,MAAD,IAAY;MACtB,MAAM;QAAEC;MAAF,IAAW,KAAKC,KAAtB;MACA,OAAOD,IAAI,CAACE,IAAL,CAAWC,GAAD,IAASA,GAAG,CAACC,OAAJ,MAAgBL,MAAhB,aAAgBA,MAAhB,uBAAgBA,MAAM,CAAEK,OAAxB,CAAnB,CAAP;IACD,CAhBa;;IAAA,KAkBdC,YAlBc,GAkBC,YAAY;MACzB,MAAM;QAAEC;MAAF,IAAc,KAAKL,KAAzB;;MACA,IAAI,KAAKH,SAAL,CAAeC,MAAf,CAAJ,EAA4B;QAC1B,KAAKQ,QAAL,CAAc;UAAEC,OAAO,EAAE;QAAX,CAAd;QACA,MAAMd,UAAU,CAACK,MAAD,CAAhB;QACA,MAAMU,OAAO,GAAGH,OAAO,CAACI,MAAR,CAAgBC,CAAD;UAAA;;UAAA,OAAOA,CAAC,CAACP,OAAF,iBAAcL,MAAd,4CAAc,QAAQK,OAAtB,CAAP;QAAA,CAAf,CAAhB;QACA,KAAKG,QAAL,CAAc;UAAEC,OAAO,EAAE,KAAX;UAAkBR,IAAI,EAAES;QAAxB,CAAd;MACD;;MAAA;MACD,MAAMG,KAAK,GAAG,MAAMnB,gBAAgB,EAApC;MACA,KAAKc,QAAL,CAAc;QAAED,OAAO,EAAEM,KAAX;QAAkBJ,OAAO,EAAE;MAA3B,CAAd;IACD,CA5Ba;;IAEZ,KAAKP,KAAL,GAAa;MACXO,OAAO,EAAE,IADE;MAEXF,OAAO,EAAE;IAFE,CAAb;EAID;;EAEsB,MAAjBO,iBAAiB,GAAG;IACxB,MAAMC,IAAI,GAAG,MAAMrB,gBAAgB,EAAnC;IACA,KAAKc,QAAL,CAAc;MAAEC,OAAO,EAAE,KAAX;MAAkBF,OAAO,EAAEQ;IAA3B,CAAd;EACD;;EAmBDC,MAAM,GAAG;IACP,MAAM;MAAEP,OAAF;MAAWF;IAAX,IAAuB,KAAKL,KAAlC;IAEA,oBACE;MAAA,WACGO,OAAO,iBAAI,QAAC,OAAD;QAAA;QAAA;QAAA;MAAA,QADd,EAEG,CAACA,OAAD,iBACC;QAAA,wBACE,QAAC,MAAD;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,eAAY,gBAAjB;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF,EAGGF,OAAO,CAACU,GAAR,CAAab,GAAD,iBAAU,eAAC,SAAD,OAChBA,GADgB;UAErB,GAAG,EAAGA,GAAG,CAACC,OAFW;UAGrB,OAAO,MAHc;UAIrB,YAAY,EAAG,KAAKC,YAJC;UAAA;UAAA;YAAA;YAAA;YAAA;UAAA;QAAA,EAAtB,CAHH;MAAA;QAAA;QAAA;QAAA;MAAA,QAHJ;IAAA,gBADF;EAiBD;;AAnDqC;;AAsDxC,eAAeV,SAAf"},"metadata":{},"sourceType":"module"}